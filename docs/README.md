<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# freshrss\-cleaner

```go
import "github.com/brpaz/freshrss-cleaner"
```

Package main provides the entry point for the application. It is responsible for initializing the global dependencies and executing the root command.

## Index



# cmd

```go
import "github.com/brpaz/freshrss-cleaner/cmd"
```

Package cmd contains the command definitions for the application.

## Index

- [func NewRootCmd\(\) \*cobra.Command](<#NewRootCmd>)


<a name="NewRootCmd"></a>
## func NewRootCmd

```go
func NewRootCmd() *cobra.Command
```

NewRootCmd returns a new instance of the root command for the application

# clean

```go
import "github.com/brpaz/freshrss-cleaner/cmd/clean"
```

Package clean provides the command definition for the clean command.

## Index

- [func New\(\) \*cobra.Command](<#New>)


<a name="New"></a>
## func New

```go
func New() *cobra.Command
```

New creates a new clean command

# createconfig

```go
import "github.com/brpaz/freshrss-cleaner/cmd/createconfig"
```

Package createconfig provides a command to create a default configuration file for the application.

## Index

- [func New\(\) \*cobra.Command](<#New>)


<a name="New"></a>
## func New

```go
func New() *cobra.Command
```

New creates a instance of the create\-config command

# version

```go
import "github.com/brpaz/freshrss-cleaner/cmd/version"
```

Package version provides the command definition for the version command.

## Index

- [Variables](<#variables>)
- [func New\(\) \*cobra.Command](<#New>)


## Variables

<a name="BuildDate"></a>

```go
var (
    BuildDate = ""
    Version   = "dev"
    GitCommit = ""
)
```

<a name="New"></a>
## func New

```go
func New() *cobra.Command
```

New creates a command that prints the version of the application.

# config

```go
import "github.com/brpaz/freshrss-cleaner/internal/config"
```

Package config provides functionality to manage the configuration of the application.

## Index

- [Constants](<#constants>)
- [func CreateDefaultConfigFile\(configFilePath string\) \(string, error\)](<#CreateDefaultConfigFile>)
- [func DefaultConfigFilePath\(\) string](<#DefaultConfigFilePath>)
- [type FeedConfig](<#FeedConfig>)
- [type RootConfig](<#RootConfig>)
  - [func Load\(configPath string\) \(\*RootConfig, error\)](<#Load>)


## Constants

<a name="DefaultConfig"></a>DefaultConfig provides the default configuration template

```go
const DefaultConfig = `url: "https://<your-freshrss-instance>"
username: "user"
password: "pass"
api_key: ""
feeds:
  - id: "feed1"
	days: 7
`
```

<a name="CreateDefaultConfigFile"></a>
## func CreateDefaultConfigFile

```go
func CreateDefaultConfigFile(configFilePath string) (string, error)
```

CreateDefaultConfigFile creates a default configuration file in the user's config directory.

<a name="DefaultConfigFilePath"></a>
## func DefaultConfigFilePath

```go
func DefaultConfigFilePath() string
```

DefaultConfigFilePath returns the default path for the configuration file.

<a name="FeedConfig"></a>
## type FeedConfig

FeedConfig represents the configuration for a specific feed.

```go
type FeedConfig struct {
    ID   string `yaml:"id"`
    Days int    `yaml:"days"`
}
```

<a name="RootConfig"></a>
## type RootConfig

RootConfig represents the root configuration structure for the application.

```go
type RootConfig struct {
    URL      string       `yaml:"url"`
    Username string       `yaml:"username"`
    Password string       `yaml:"password"`
    Feeds    []FeedConfig `yaml:"feeds"`
}
```

<a name="Load"></a>
### func Load

```go
func Load(configPath string) (*RootConfig, error)
```

Load loads the configuration file from the specified path and returns a RootConfig struct. The configuration file should be in YAML format. Environment variables specified in the config file with env\("VAR\_NAME"\) will be replaced with their values. Returns an error if the config file cannot be read or parsed.

# freshrss

```go
import "github.com/brpaz/freshrss-cleaner/internal/freshrss"
```

## Index

- [type API](<#API>)
- [type Cleaner](<#Cleaner>)
  - [func NewCleaner\(opts ...CleanerOption\) \(\*Cleaner, error\)](<#NewCleaner>)
  - [func \(c \*Cleaner\) CleanOldEntries\(ctx context.Context, log \*slog.Logger\) error](<#Cleaner.CleanOldEntries>)
  - [func \(c \*Cleaner\) Validate\(\) error](<#Cleaner.Validate>)
- [type CleanerOption](<#CleanerOption>)
  - [func WithClient\(client API\) CleanerOption](<#WithClient>)
  - [func WithConfig\(cfg \*config.RootConfig\) CleanerOption](<#WithConfig>)


<a name="API"></a>
## type API

API defines the interface for the FreshRSS API client

```go
type API interface {
    GetAuthToken(ctx context.Context) (string, error)
    MarkAsRead(ctx context.Context, authToken string, feedID string, days int) error
}
```

<a name="Cleaner"></a>
## type Cleaner

Cleaner is a struct that represents a Freshrss cleaner

```go
type Cleaner struct {
    // contains filtered or unexported fields
}
```

<a name="NewCleaner"></a>
### func NewCleaner

```go
func NewCleaner(opts ...CleanerOption) (*Cleaner, error)
```

NewCleaner creates a new instance of the Freshrss cleaner

<a name="Cleaner.CleanOldEntries"></a>
### func \(\*Cleaner\) CleanOldEntries

```go
func (c *Cleaner) CleanOldEntries(ctx context.Context, log *slog.Logger) error
```

CleanOldEntries cleans up old entries from FreshRSS based on the provided configuration

<a name="Cleaner.Validate"></a>
### func \(\*Cleaner\) Validate

```go
func (c *Cleaner) Validate() error
```

Validate checks if the Freshrss cleaner is properly configured with all the required fields

<a name="CleanerOption"></a>
## type CleanerOption

Option defines a function to configure the FreshRSS client

```go
type CleanerOption func(*Cleaner)
```

<a name="WithClient"></a>
### func WithClient

```go
func WithClient(client API) CleanerOption
```

WithClient provides a way to set the Freshrss client for the cleaner

<a name="WithConfig"></a>
### func WithConfig

```go
func WithConfig(cfg *config.RootConfig) CleanerOption
```



# client

```go
import "github.com/brpaz/freshrss-cleaner/internal/freshrss/client"
```

Package client provides a Go client for the FreshRSS API

## Index

- [type Client](<#Client>)
  - [func New\(opts ...Option\) \(\*Client, error\)](<#New>)
  - [func \(c \*Client\) GetAuthToken\(ctx context.Context\) \(string, error\)](<#Client.GetAuthToken>)
  - [func \(c \*Client\) MarkAsRead\(ctx context.Context, authToken string, feedID string, olderThanDays int\) error](<#Client.MarkAsRead>)
  - [func \(c \*Client\) Validate\(\) error](<#Client.Validate>)
- [type Option](<#Option>)
  - [func WithBaseURL\(baseURL string\) Option](<#WithBaseURL>)
  - [func WithCredentials\(username, password string\) Option](<#WithCredentials>)
  - [func WithHTTPClient\(httpClient \*http.Client\) Option](<#WithHTTPClient>)
  - [func WithTimeout\(timeout time.Duration\) Option](<#WithTimeout>)


<a name="Client"></a>
## type Client

Client represents a client for the FreshRSS API

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func New

```go
func New(opts ...Option) (*Client, error)
```

New creates a new FreshRSS client with the provided options

<a name="Client.GetAuthToken"></a>
### func \(\*Client\) GetAuthToken

```go
func (c *Client) GetAuthToken(ctx context.Context) (string, error)
```

GetAuthToken retrieves an authentication token from the FreshRSS API

<a name="Client.MarkAsRead"></a>
### func \(\*Client\) MarkAsRead

```go
func (c *Client) MarkAsRead(ctx context.Context, authToken string, feedID string, olderThanDays int) error
```

MarkAsRead marks items in a feed as read that are older than the specified days

<a name="Client.Validate"></a>
### func \(\*Client\) Validate

```go
func (c *Client) Validate() error
```

Validate checks if the client is configured properly

<a name="Option"></a>
## type Option

Option defines a function to configure the FreshRSS client

```go
type Option func(*Client)
```

<a name="WithBaseURL"></a>
### func WithBaseURL

```go
func WithBaseURL(baseURL string) Option
```

WithBaseURL sets the base URL for the FreshRSS API

<a name="WithCredentials"></a>
### func WithCredentials

```go
func WithCredentials(username, password string) Option
```

WithCredentials sets the username and password for authentication

<a name="WithHTTPClient"></a>
### func WithHTTPClient

```go
func WithHTTPClient(httpClient *http.Client) Option
```

WithHTTPClient sets a custom HTTP client

<a name="WithTimeout"></a>
### func WithTimeout

```go
func WithTimeout(timeout time.Duration) Option
```

WithTimeout sets a custom timeout for the HTTP client

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
